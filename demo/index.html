<!DOCTYPE html>
<html>
<head>
    <title>skyi-face.js</title>
    <script src="/bin/skyi-face.js"></script>
    <style>
        body {
            background-color: #111;
            position: absolute;
            top: 0; bottom: 0;
            left: 0; right: 0;
            margin: 0;
        }

        canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>
    <canvas></canvas>
    <button id="memorize" onclick="memorizeFace(prompt('Name'))">Memorize</button>
    <button id="recognize" onclick="recognizeFace()">Recognize</button>
    <script>
        var skyi = new SkyiFace();
        function memorizeFace(name) {
            skyi.memorize(name, document.querySelector('canvas'))
        }
        function recognizeFace() {
            var result = skyi.recognize(document.querySelector('canvas'))
            alert(JSON.stringify(result))
        }

        navigator.getUserMedia  = navigator.getUserMedia ||
                              navigator.webkitGetUserMedia ||
                              navigator.mozGetUserMedia ||
                              navigator.msGetUserMedia;
        navigator.getUserMedia({video: true}, function(stream) {
            var video = document.createElement('video');
            video.src = window.URL.createObjectURL(stream);
            video.onloadedmetadata = function () {
                var canvas = document.querySelector('canvas');
                var context = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                function render () {
                    context.drawImage(video, 0, 0)
                    window.requestAnimationFrame(render);
                }
                render();
            }
        }, function(){});
    </script>
</body>
</html>
